[main]
phraseStart=""".method public whitelist newApplication(Ljava/lang/ClassLoader;Ljava/lang/String;Landroid/content/Context;)Landroid/app/Application;"""
phraseEnd=""".end method"""
replaceWith="""
.method public whitelist newApplication(Ljava/lang/ClassLoader;Ljava/lang/String;Landroid/content/Context;)Landroid/app/Application;
    .registers 5
    .annotation system Ldalvik/annotation/Throws;
        value = {
            Ljava/lang/InstantiationException;,
            Ljava/lang/IllegalAccessException;,
            Ljava/lang/ClassNotFoundException;
        }
    .end annotation

    .line 1245
    invoke-virtual {p3}, Landroid/content/Context;->getPackageName()Ljava/lang/String;

    move-result-object v0

    invoke-direct {p0, v0}, Landroid/app/Instrumentation;->getFactory(Ljava/lang/String;)Landroid/app/AppComponentFactory;

    move-result-object v0

    .line 1246
    invoke-virtual {v0, p1, p2}, Landroid/app/AppComponentFactory;->instantiateApplication(Ljava/lang/ClassLoader;Ljava/lang/String;)Landroid/app/Application;

    move-result-object p1

    .line 1247
    invoke-virtual {p1, p3}, Landroid/app/Application;->attach(Landroid/content/Context;)V

    .line 1248
    invoke-static {p1}, Lcom/android/internal/util/slim/AttestationHooks;->initApplicationBeforeOnCreate(Landroid/app/Application;)V

    .line 1249
    invoke-virtual {p3}, Landroid/content/Context;->getPackageName()Ljava/lang/String;

    move-result-object p2

    .line 1250
    invoke-static {p2}, Lcom/android/internal/util/slim/PixelPropsUtils;->setProps(Ljava/lang/String;)V

    .line 1251
    return-object p1
.end method
"""

